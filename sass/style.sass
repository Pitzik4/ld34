@import animations


html, body
  height: 100%
  overflow: hidden
  background-color: black
  pointer-events: none
  font-family: 'Montserrat', sans-serif
  font-size: 16px

#glass
  top: 0
  left: 0
  width: 100%
  height: 100%


#game
  overflow: hidden
  left: 0
  top: 0
  width: 640px
  height: 360px


div
  position: absolute
  left: 0
  bottom: 0


.spr-overlay
  position: absolute
  left: 0
  bottom: 0
  width: 100%
  height: 100%
  z-index: 50
  pointer-events: none
  +css-transition(background-color 20s, opacity 20s)

+css-keyframes(dialogue-in)
  from
    opacity: 0
    bottom: -6px
  to
    opacity: 1
    bottom: 0
+css-keyframes(dialogue-out)
  from
    opacity: 1
    bottom: 0
  to
    opacity: 0
    bottom: 6px

.spr-dialogue
  width: 180px
  left: -90px
  text-align: center
  color: white
  z-index: 100
  text-shadow: 1px 1px 0 rgba(0,0,0,0.25)
  +css-animation(2s ease-out 0s 1 normal both running dialogue-in)
  &.anim-out
    +css-animation(2s ease-out 0s 1 normal both running dialogue-out)

.downpour
  opacity: 0.8

.wrapper-night::before
  content: ''
  background-image: url('img/stars.png')
  background-repeat: repeat
  background-size: 640px
  position: absolute
  width: 12000px
  height: 7000px
  left: -6000px
  bottom: -3500px
  z-index: -50

+image(field, 'field.svg', 7200px, 500px)
  z-index: 10
  .downpour &, .night &
    background-image: url('img/field-silhouette.svg')
+image(field-snowy, 'field-snowy.svg', 7200px, 500px)
  z-index: 10
+image(snowy-pond, 'field-snowy-pond.svg', 1000px, 300px)
  z-index: 20
+sprite(tree, 'tree.svg', 350px, 335px)
  z-index: -10
  +still-sheet-animation(bare, 1)
  +still-sheet-animation(autumn, 2)
  +still-sheet-animation(silhouette, 3)

+sprite(boy, 'boy.svg', 100px, 150px)
  .downpour &::before, .night &::before
    content: url('img/boy-silhouette.svg')
  z-index: -1
  +still-sheet-animation(sit, 13)
  +sheet-animation(stand, 5, 1, 13, 14, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 17, 0)
  +sheet-animation(look-up, 5, 1, 13, 14, 15, 16)
  +sheet-animation(stand-up, 5, 1, 16, 17, 0)
  +sheet-animation(sad, 6, 1, 0, 18, 19, 20)
  +sheet-animation(stressed, 10, 1, 0, 18, 19, 21, 22)
  +still-sheet-animation(stressed-full, 22)
  +sheet-animation(sob, 4, infinite, 22, 22, 22, 22, 22, 22, 22, 22, 23, 22, 22, 22, 22, 22, 22, 22, 22, 23, 22, 23)
  +sheet-animation(gesture, 10, 1, 0, 24, 25, 26)

+sprite(kid, 'kid.svg', 100px, 150px)
  +sheet-animation(sad, 6, 1, 0, 13, 14, 15)
  +sheet-animation(determined, 16, 1, 0, 16, 17, 18, 18, 18, 18, 18, 18, 19, 20, 21)
  +sheet-animation(determined-out, 12, 1, 21, 22, 23, 0)
  +sheet-animation(persuasive, 12, 1, 0, 16, 17, 18)

+sprite(teen, 'teen.svg', 100px, 175px)
  +sheet-animation(sad, 8, 1, 0, 13, 14, 15, 16)
  +sheet-animation(solemn, 8, 1, 0, 17, 18, 19)

+sprite(adult, 'adult.svg', 100px, 190px)
  .downpour &::before, .night &::before
    content: url('img/adult-silhouette.svg')
  +sheet-animation(solemn, 8, 1, 0, 13, 14, 15)

+sheet-animation(walk, 8, infinite, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5)

+css-keyframes(the-end)
  from
    color: black
  to
    color: white
.spr-the-end::before
  content: 'End.'
  width: 640px
  position: absolute
  left: 0
  bottom: 50%
  color: white
  font-size: 32px
  text-align: center
  +css-animation(6s ease-out 3s 1 normal both running the-end)

+css-keyframes(snowfall)
  from
    background-position: 0 0
  to
    background-position: 0 700px
+css-keyframes(snowfall2)
  from
    background-position: 0 0
  to
    background-position: 1200px 3500px
.spr-snow
  transform: rotate(15deg)
  z-index: 15
  &::before, &::after
    content: ''
    position: absolute
    left: 0
    bottom: 0
    width: 12000px
    height: 7000px
    background-image: url('img/snow.png')
    background-repeat: repeat
  &::before
    +css-animation(10s linear 0s infinite normal both running snowfall)
  &::after
    +css-animation(50s linear 0s infinite normal both running snowfall2)

+css-keyframes(torrent)
  from
    background-position: 0 0
  to
    background-position: 0 700px
+css-keyframes(torrent2)
  from
    background-position: 0 0
  to
    background-position: 1200px 3500px
.spr-torrent
  transform: rotate(40deg)
  z-index: 15
  &::before, &::after
    content: ''
    position: absolute
    left: 0
    bottom: 0
    width: 12000px
    height: 7000px
    background-image: url('img/torrent.png')
    background-repeat: repeat
  &::before
    +css-animation(1s linear 0s infinite normal both running torrent)
  &::after
    +css-animation(5s linear 0s infinite normal both running torrent2)

+gradient-sprite(end, white, 640px, 420px, 800px)
  z-index: 20
